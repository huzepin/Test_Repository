{"version":3,"sources":["../../src/cascader/cascader.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,OAAO,EAAE,SAAA,EAAW,UAAA,EAA+B,SAAA,EAAU,MAAA,eAAA,CAAA;AAC7D,OAAO,EAAE,eAAA,EAAwB,MAAA,kBAAA,CAAA;AACjC,OAAO,EAAwB,iBAAA,EAAkB,MAAA,gBAAA,CAAA;AACjD;IAEC,8BAAA;IAKD;;OAEG;IACH,oBACY,QAAU;QADtB,YAGI,iBAAO,SACR;QAHS,cAAA,GAAA,QAAA,CAAU;QATpB,WAAK,GAEU,EAAA,CAAA;QADf,iBAAW,GAEY,KAAA,CAAA;QADvB,gBAAU,GAEY,KAAA,CAAA;QADtB,mBAAa,GAEa,EAAA,CAAA;QAsHlB,mBAAA,GAA0B,cAAM,CAAA,CAAA;QAChC,kBAAA,GAAyB,cAAM,CAAA,CAAA;;IAhHvC,CAAC;IACH;;OAEG;IACH,0BAFG,GAEH;QACI,IAAI,CAFC,WAAC,GAAa,KAAA,CAAA;QAGnB,IAAI,CAFC,gBAAC,IAAmB,IAAA,CAAK,gBAAC,EAAgB,CAAA;IAGjD,CAAC;IACH;;;OAGG;IACH,gCALG,GAKH,UALG,KAAA;QAKH,iBAkBG;QAjBC,KAAK,CALC,eAAC,EAAe,CAAA;QAMtB,EAAE,CAAC,CAAC,IALC,CAAI,UAAC,CAAU;YAAC,MAAA,CAAA;QAOrB,IAAM,gBAAgB,CALhB,OAAA,GAAqB,CAAE,KAAA,CAAM,MAAU,CAAA,CAAA;QAM7C,IAAM,gBAAgB,CALhB,aAAA,GAAgB,CAAA,MAAE,EAAO,GAAA,EAAK,OAAA,CAAQ,CAAC,IAAC,CAAI,UAAA,CAAC,IAAI,OAAA,CAAA,KAAM,OAAA,CAAQ,OAAC,EAAf,CAAe,CAAO,CAAA;QAM7E,EAAE,CAAC,CAAC,CALC,aAAC,CAAa;YAAC,MAAA,CAAA;QAMpB,IAAI,CALC,WAAC,GAAa,CAAA,IAAE,CAAI,WAAC,CAAA;QAO1B,EAAE,CAAC,CAAC,IALC,CAAI,WAAC,CAAW,CAAC,CAAA;YAMpB,IAAI,CALC,gBAAC,GAAkB,IAAA,CAAK,QAAC,CAAQ,MAAC,CAMrC,UAAU,EALE,OAAA,EAAS;gBAMnB,KAAI,CALC,WAAC,GAAa,KAAA,CAAA;YAMrB,CAAC,CACF,CAAA;QACH,CAAC;QALC,IAAA,CAAK,CAAA;YAML,IAAI,CALC,gBAAC,IAAmB,IAAA,CAAK,gBAAC,EAAgB,CAAA;QAMjD,CAAC;IACH,CAAC;IACH;;OAEG;IACH,iCAPG,GAOH;QACI,IAAM,gBAAgB,CAPhB,SAAA,GAAsB,EAAA,CAAA;QAQ5B,IAAI,CAPC,KAAC,CAAK,OAAC,CAAO,UAAC,KAAc;YAQhC,IAAM,gBAAgB,CAPhB,KAAA,GAAkB,KAAA,CAAM,MAAC,CAAM,UAAC,IAAM,IAAW,OAAA,IAAA,CAAK,MAAC,EAAN,CAAM,CAAM,CAAA;YAQnE,SAAS,CAPC,IAAC,CAAI,KAAC,CAAK,CAAC,CAAC,CAAC,CAAA;QAQ1B,CAAC,CAPC,CAAA;QAQF,IAAI,CAPC,aAAC,GAAe,SAAA,CAAA;QAQrB,IAAM,gBAAgB,CAPhB,IAAA,GAAO,SAAA,CAAU,GAAC,CAAG,UAAC,IAAM,IAAW,OAAA,IAAA,CAAK,KAAC,EAAN,CAAM,CAAK,CAAA;QAQxD,IAAI,CAPC,KAAC,GAAO,IAAA,CAAA;QAQb,IAAI,CAPC,WAAC,CAAW,IAAC,CAAI,IAAC,CAAI,CAAA;QAQ3B,IAAI,CAPC,aAAC,CAAa,IAAC,CAAI,CAAA;IAQ1B,CAAC;IACH;;;OAGG;IACH,+BAVG,GAUH,UAVG,KAAA;QAWC,KAAK,IAVI,KAAA,CAAM,eAAC,EAAe,CAAA;QAW/B,IAAI,CAVC,aAAC,GAAe,EAAA,CAAA;QAWrB,IAAM,gBAAgB,CAVhB,KAAA,GAAQ,IAAA,CAAK,OAAC,CAAO,GAAC,CAAG,UAAC,MAAQ;YAWtC,OAAA,MAAM,CAVC,MAAC,CAAM,MAAC,EAAO;gBAWpB,MAAM,EAVE,KAAA;aAWT,CAVC;QAQF,CARE,CAAC,CAAA;QAWL,IAAI,CAVC,KAAC,GAAO,CAAA,KAAE,CAAK,CAAA;QAWpB,IAAI,CAVC,WAAC,GAAa,KAAA,CAAA;IAWrB,CAAC;IACH;;;;;OAKG;IACH,iCAfG,GAeH,UAfG,KAAA,EAAA,IAAA,EAAA,KAAA;QAgBC,KAAK,CAfC,eAAC,EAAe,CAAA;QAiBtB,EAAE,CAAC,CAAC,IAfC,CAAI,KAAC,CAAK,IAAC,CAAI,CAAC,KAAC,CAAK,CAAC,UAAC,CAAU;YAAC,MAAA,CAAA;QAgBxC,IAAI,CAfC,KAAC,CAAK,IAAC,CAAI,GAAG,IAAA,CAAK,KAAC,CAAK,IAAC,CAAI,CAAC,GAAC,CAAG,UAAC,IAAM,EAAQ,CAAG;YAgBxD,OAAA,MAAM,CAfC,MAAC,CAAM,IAAC,EAAK,EAAE,MAAA,EAAQ,CAAA,KAAM,KAAA,EAAM,CAAE;QAe5C,CAf4C,CAAC,CAAA;QAgB/C,cAAc;QACd,IAAI,CAfC,KAAC,CAAK,MAAC,GAAQ,IAAA,GAAO,CAAA,CAAA;QAgB3B,IAAM,gBAAgB,CAfhB,IAAA,GAAO,IAAA,CAAK,KAAC,CAAK,IAAC,CAAI,CAAC,KAAC,CAAK,CAAC,QAAC,CAAA;QAiBtC,UAAU;QACV,EAAE,CAAC,CAAC,IAfC,IAAO,KAAA,CAAM,OAAC,CAAO,IAAC,CAAI,CAAC,CAAC,CAAA;YAgB/B,2BAA2B;YAC3B,IAAI,CAfC,cAAC,IAAiB,IAAA,CAAK,YAAC,EAAY,CAAA;YAgBzC,IAAM,gBAAgB,CAfhB,UAAA,GAAa,IAAA,CAAK,GAAC,CAAG,UAAC,IAAM,IAAW,OAAA,MAAA,CAAO,MAAC,CAAM,IAAC,EAAK,EAAE,MAAA,EAAQ,KAAA,EAAM,CAAE,EAAtC,CAAsC,CAAC,CAAA;YAgBrF,MAAM,CAfC,IAAA,CAAK,KAAC,CAAK,IAAC,CAAI,UAAC,CAAU,CAAA;QAgBpC,CAAC;QACD,YAAY;QACZ,IAAI,CAfC,YAAC,EAAY,CAAA;QAgBlB,IAAI,CAfC,WAAC,GAAa,KAAA,CAAA;IAgBrB,CAAC;IACH;;OAEG;IACH,kCAjBG,GAiBH;QACI,MAAM,CAjBC,CAAA,CAAE,CAAC,IAAC,CAAI,SAAC,IAAY,IAAA,CAAK,UAAC,IAAa,IAAA,CAAK,aAAC,CAAa,MAAC,CAAM,CAAA;IAkB3E,CAAC;IACH;;OAEG;IACH,6BAnBG,GAmBH;QACI,IAAI,CAnBC,UAAC,EAAU,CAAA;QAoBhB,EAAE,CAAC,CAAC,IAnBC,CAAI,KAAC,IAAQ,IAAA,CAAK,KAAC,CAAK,MAAC,CAAM,CAAC,CAAA;YAoBnC,IAAM,gBAAgB,CAnBhB,UAAA,GAAW,UAAA,OAAiB,EAAG,GAAK;gBAoBxC,IAAM,gBAAgB,CAnBhB,IAAA,GAAe,OAAA,CAAQ,MAAC,CAAM,UAAC,IAAM,IAAW,OAAA,IAAA,CAAK,KAAC,KAAS,GAAA,EAAf,CAAe,CAAI,CAAC,CAAC,CAAC,CAAA;gBAoB5E,MAAM,CAnBC,EAAE,QAAA,EAAU,IAAA,CAAK,QAAC,EAAS,GAAA,EAAK,IAAA,EAAK,CAAA;YAoB9C,CAAC,CAAA;YAED,IAAI,gBAAgB,CAnBhB,SAAA,GAAoB,IAAA,CAAK,OAAC,CAAA;YAoB9B,IAAM,gBAAgB,CAnBhB,GAAA,GAAgB,IAAA,CAAK,KAAC,CAAK,GAAC,CAAG,UAAA,CAAC;gBAC9B,IAAA,6BAAwC,EAAtC,sBAAA,EAAU,YAAA,CAA4B;gBAoB9C,SAAO,GAnBG,QAAA,CAAA;gBAoBV,MAAM,CAnBC,GAAA,CAAA;YAoBT,CAAC,CAnBC,CAAA;YAoBF,IAAI,CAnBC,aAAC,GAAe,GAAA,CAAI,MAAC,CAAM,UAAA,CAAC,IAAI,OAAA,CAAA,CAAE,CAAC,EAAH,CAAG,CAAC,CAAA;QAoB3C,CAAC;IACH,CAAC;IACH;;OAEG;IACH,gCArBG,GAqBH;QACI,IAAI,CArBC,gBAAC,IAAmB,IAAA,CAAK,gBAAC,EAAgB,CAAA;IAsBjD,CAAC;IACH;;;OAGG;IACH,+BAxBG,GAwBH,UAxBG,KAAA;QAyBC,IAAI,CAxBC,KAAC,GAAO,KAAA,CAAA;IAyBf,CAAC;IACH;;;OAGG;IACH,qCA3BG,GA2BH,UA3BG,EAAA;QA4BC,IAAI,CA3BC,aAAC,GAAe,EAAA,CAAA;IA4BvB,CAAC;IACH;;;OAGG;IACH,sCA9BG,GA8BH,UA9BG,EAAA;QA+BC,IAAI,CA9BC,YAAC,GAAc,EAAA,CAAA;IA+BtB,CAAC;IAzBI,qBAAA,GAAoC;QA8B3C,EA7BE,IAAA,EAAM,SAAA,EAAW,IAAA,EAAM,CAAA;oBA8BvB,QAAQ,EA7BE,aAAA;oBA8BV,SAAS,EA7BE,CAAA;4BA8BT,OAAO,EA7BE,iBAAA;4BA8BT,WAAW,EA7BE,UAAA,CAAW,cAAM,OAAA,UAAA,EAAA,CAAA,CAAW;4BA8BzC,KAAK,EA7BE,IAAA;yBA8BR,CA7BC;oBA8BF,QAAQ,EA7BE,mtCAuDT;iBACF,EA7BC,EAAG;KA8BJ,CA7BC;IA8BF;;OAEG;IA9BF,yBAAA,GAAA,cAAA,OAAA;QAgCD,EAAC,IAAI,EAAE,SAAS,GAAG;KAClB,EAjCA,CAiCA,CAAC;IACF,iBAAC;CAxMD,AAwMC,CAtMA,eAAA,GAsMA;SAtMA,UAAA;AAwMD;IACA,gBAAgB;IAChB,UAAU,CAAC,UAAU,CAAC;IACtB;;;OAGG;IACH,UAAU,CAAC,cAAc,CAAC;IAC1B,gBAAgB;IAChB,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC;IAC3B,gBAAgB;IAChB,UAAU,CAAC,SAAS,CAAC,WAAW,CAAC;IACjC,gBAAgB;IAChB,UAAU,CAAC,SAAS,CAAC,UAAU,CAAC;IAChC,gBAAgB;IAChB,UAAU,CAAC,SAAS,CAAC,aAAa,CAAC;IACnC,gBAAgB;IAChB,UAAU,CAAC,SAAS,CAAC,gBAAgB,CAAC;IACtC,gBAAgB;IAChB,UAAU,CAAC,SAAS,CAAC,aAAa,CAAC;IACnC,gBAAgB;IAChB,UAAU,CAAC,SAAS,CAAC,YAAY,CAAC;IAClC,gBAAgB;IAChB,UAAU,CAAC,SAAS,CAAC,QAAQ,CAAC;AAC9B,CAAC","file":"cascader.js","sourceRoot":"","sourcesContent":["import { Component, forwardRef, OnDestroy, OnInit, Renderer2 } from '@angular/core';\nimport { ElCascaderPoprs, Option } from './cascader-props';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nexport class ElCascader extends ElCascaderPoprs implements OnInit, OnDestroy, ControlValueAccessor {\n  \n  steps: any[] = []\n  menuVisible: boolean = false\n  inputHover: boolean = false\n  currentLabels: Option[] = []\n  globalListenFunc: Function\n/**\n * @param {?} renderer\n */\nconstructor(\nprivate renderer: Renderer2,\n  ) {\n    super()\n  }\n/**\n * @return {?}\n */\nclose(): void {\n    this.menuVisible = false\n    this.globalListenFunc && this.globalListenFunc()\n  }\n/**\n * @param {?} event\n * @return {?}\n */\nclickHandle(event: MouseEvent): void {\n    event.stopPropagation()\n    if (this.elDisabled) return\n    \n    const /** @type {?} */ element: HTMLElement = /** @type {?} */(( event.target as HTMLElement))\n    const /** @type {?} */ isSelfTrigger = ['SPAN', 'I', 'INPUT'].find(v => v === element.tagName)\n    if (!isSelfTrigger) return\n    this.menuVisible = !this.menuVisible\n    \n    if (this.menuVisible) {\n      this.globalListenFunc = this.renderer.listen(\n        'document', 'click', () => {\n          this.menuVisible = false\n        }\n      )\n    } else {\n      this.globalListenFunc && this.globalListenFunc()\n    }\n  }\n/**\n * @return {?}\n */\nchangeLabels(): void {\n    const /** @type {?} */ nextValue: Option[] = []\n    this.steps.forEach((items: Option[]) => {\n      const /** @type {?} */ steps: Option[] = items.filter((item: Option) => item.active)\n      nextValue.push(steps[0])\n    })\n    this.currentLabels = nextValue\n    const /** @type {?} */ next = nextValue.map((item: Option) => item.value)\n    this.model = next\n    this.modelChange.emit(next)\n    this.controlChange(next)\n  }\n/**\n * @param {?=} event\n * @return {?}\n */\nclearValue(event?: Event): void {\n    event && event.stopPropagation()\n    this.currentLabels = []\n    const /** @type {?} */ step1 = this.options.map((option: Option) =>\n      Object.assign(option, {\n        active: false,\n      }))\n    this.steps = [step1]\n    this.menuVisible = false\n  }\n/**\n * @param {?} event\n * @param {?} step\n * @param {?} index\n * @return {?}\n */\nselectHandle(event: Event, step: number, index: number): any {\n    event.stopPropagation()\n    \n    if (this.steps[step][index].elDisabled) return\n    this.steps[step] = this.steps[step].map((item: Option, i: number) =>\n      Object.assign(item, { active: i === index }))\n    // reset steps\n    this.steps.length = step + 1\n    const /** @type {?} */ next = this.steps[step][index].children\n    \n    // go next\n    if (next && Array.isArray(next)) {\n      // change on select (props)\n      this.changeOnSelect && this.changeLabels()\n      const /** @type {?} */ nativeNext = next.map((item: Option) => Object.assign(item, { active: false }))\n      return this.steps.push(nativeNext)\n    }\n    // last step\n    this.changeLabels()\n    this.menuVisible = false\n  }\n/**\n * @return {?}\n */\nshowClearIcon(): boolean {\n    return !!(this.clearable && this.inputHover && this.currentLabels.length)\n  }\n/**\n * @return {?}\n */\nngOnInit(): void {\n    this.clearValue()\n    if (this.model && this.model.length) {\n      const /** @type {?} */ getLabel = (options: Option[], val: string) => {\n        const /** @type {?} */ item: Option = options.filter((item: Option) => item.value === val)[0]\n        return { children: item.children, val: item }\n      }\n      \n      let /** @type {?} */ options: Option[] = this.options\n      const /** @type {?} */ val: Option[] = this.model.map(v => {\n        const { children, val } = getLabel(options, v)\n        options = children\n        return val\n      })\n      this.currentLabels = val.filter(v => !!v)\n    }\n  }\n/**\n * @return {?}\n */\nngOnDestroy(): void {\n    this.globalListenFunc && this.globalListenFunc()\n  }\n/**\n * @param {?} value\n * @return {?}\n */\nwriteValue(value: any): void {\n    this.model = value\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnChange(fn: Function): void {\n    this.controlChange = fn\n  }\n/**\n * @param {?} fn\n * @return {?}\n */\nregisterOnTouched(fn: Function): void {\n    this.controlTouch = fn\n  }\nprivate controlChange: Function = () => {}\nprivate controlTouch: Function = () => {}\n  \nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'el-cascader',\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => ElCascader),\n    multi: true\n  }],\n  template: `\n    <span [class]=\"'el-cascader ' +  (menuVisible ? 'is-opened ' : '') + (elDisabled ? 'is-disabled ' : '')\n      + (size ? 'el-cascader--' + size : '')\"\n      (click)=\"clickHandle($event)\"\n      (mouseenter)=\"inputHover = true\" (mouseleave)=\"inputHover = false\">\n      <el-input [readonly]=\"true\"\n        [placeholder]=\"currentLabels.length ? '' : placeholder\"\n        [size]=\"size\" [elDisabled]=\"elDisabled\"\n        [icon]=\"showClearIcon() ? 'circle-close' : 'caret-bottom'\"\n        [iconClass]=\"showClearIcon() ? 'el-cascader__clearIcon' : (menuVisible ? 'is-reverse' : '')\"\n        (icon-click)=\"clearValue($event)\">\n      </el-input>\n    \n      <span class=\"el-cascader__label\" *ngIf=\"currentLabels.length\">\n        <ng-container *ngIf=\"allLevels\">\n          <ng-container *ngFor=\"let item of currentLabels; let i = index\">\n            {{ item.label }}\n            <span *ngIf=\"i < currentLabels.length - 1\"> / </span>\n          </ng-container>\n        </ng-container>\n        <ng-container *ngIf=\"!allLevels\">\n          {{ currentLabels[currentLabels.length - 1].label }}\n        </ng-container>\n      </span>\n      <el-cascader-menu></el-cascader-menu>\n  </span>\n  `,\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: Renderer2, },\n];\n}\n\nfunction ElCascader_tsickle_Closure_declarations() {\n/** @type {?} */\nElCascader.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nElCascader.ctorParameters;\n/** @type {?} */\nElCascader.prototype.steps;\n/** @type {?} */\nElCascader.prototype.menuVisible;\n/** @type {?} */\nElCascader.prototype.inputHover;\n/** @type {?} */\nElCascader.prototype.currentLabels;\n/** @type {?} */\nElCascader.prototype.globalListenFunc;\n/** @type {?} */\nElCascader.prototype.controlChange;\n/** @type {?} */\nElCascader.prototype.controlTouch;\n/** @type {?} */\nElCascader.prototype.renderer;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}